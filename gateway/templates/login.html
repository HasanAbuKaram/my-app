    <!DOCTYPE html>
    <html>
    <head>
        <title>Login with MSAL.js</title>
        <script src="https://alcdn.msauth.net/browser/2.30.0/js/msal-browser.min.js"></script>
    </head>
    <body>
        <h1>Login</h1>
        <button id="loginButton">Login</button>
        <button id="logoutButton" style="display: none;">Logout</button>

        <div id="message"></div>
    <script>
        // Initialize MSAL.js
            const msalConfig = {
                auth: {
                    clientId: "1c412488-b824-49c3-aa63-af78a0743b26", // replace with your app client id
                    authority: "https://login.microsoftonline.com/d33520e6-0dd4-4718-b1df-356beb84e0c5", // replace with your tenant id
            //        redirectUri: window.location.href, // current page
                },
                cache: {
                    cacheLocation: "localStorage",
                    storeAuthStateInCookie: false,
                }
            };

            const myMSALObj = new msal.PublicClientApplication(msalConfig);

            // Check login status on page load
            const accounts = myMSALObj.getAllAccounts();
            if (accounts.length > 0) {
                // User is logged in
                document.querySelector("#message").innerHTML = "Hello, " + accounts[0].name + "!";
                document.querySelector("#loginButton").style.display = "none";
                document.querySelector("#logoutButton").style.display = "block";
                window.location.replace("/"); 
            }    
        // Handle login button click
        document.querySelector("#loginButton").addEventListener("click", function() {
            myMSALObj.loginPopup()
                .then(response => {
                    document.querySelector("#message").innerHTML = "Hello, " + response.account.name + "!";
                    document.querySelector("#loginButton").style.display = "none";
                    document.querySelector("#logoutButton").style.display = "block";

                    myMSALObj.setActiveAccount(response.account);

                    myMSALObj.acquireTokenSilent({
                        scopes: ['User.ReadWrite.All', 'Directory.ReadWrite.All']
                    }).then(response => {
                        let accessToken = response.accessToken;

                        // Send the token to your Go server
                        fetch("/api/token", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json"
                            },
                            body: JSON.stringify({ token: accessToken })
                        }).then(response => {
                            if (!response.ok) {
                                throw new Error(`Server error: ${response.statusText}`);
                            }
                            return response.text(); // Use text() instead of json() to inspect the raw response.
                        }).then(data => {
                            try {
                                const jsonData = JSON.parse(data);
                                console.log("Server response:", jsonData);
                                window.location.replace("/");
                            } catch (error) {
                                console.error("Failed to parse JSON:", error, "Raw response:", data);
                            }
                        }).catch(error => {
                            console.error("Failed to send token to server:", error);
                        });

                    }).catch(error => {
                        console.error("Failed to acquire access token:", error);
                    });
                }).catch(error => {
                    document.querySelector("#message").innerHTML = "Error: " + error.message;
                });
        });

        // Handle logout button click
            document.querySelector("#logoutButton").addEventListener("click", function() {
            myMSALObj.logout();
        //  document.cookie = "auth_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            location.reload();
            sessionStorage.removeItem("msal.interaction.status");
        });
    </script>
    </body>
    </html>